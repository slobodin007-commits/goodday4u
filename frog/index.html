<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Squish Frog ‚Äî goodday4u.com</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8042664823664503"
  crossorigin="anonymous"></script>
<script src="../js/translations.js"></script>
<script src="../js/common.js"></script>
<style>
  :root{--b:#e5e7eb;--t:#111827;--m:#6b7280;}
  body{margin:0;font-family:system-ui;background:#fff;color:var(--t)}
  .main-wrapper{display:flex;max-width:1400px;margin:0 auto;gap:2rem;align-items:flex-start;min-height:100vh;padding:24px}
  .ad-sidebar{width:160px;min-width:160px;position:sticky;top:2rem;display:flex;flex-direction:column;gap:1rem}
  .ad-block{width:160px;min-height:600px;background:#f9f9f9;border:1px solid var(--b);border-radius:8px;display:flex;align-items:center;justify-content:center;color:#999;font-size:0.85rem;text-align:center;padding:1rem}
  .ad-block::before{content:'Ad';font-size:0.75rem;color:#ccc}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;flex:1;max-width:520px;margin:0 auto}
  @media (max-width:1200px){.ad-sidebar{display:none}.main-wrapper{gap:0}}
  .card{width:min(520px,92vw);border:1px solid var(--b);border-radius:22px;padding:18px;text-align:center}
  .muted{color:var(--m);font-size:13px;line-height:1.4}
  .stage{
    width:360px;max-width:92vw;height:420px;margin:14px auto;
    border:1px solid var(--b);border-radius:22px;background:#fff;
    display:flex;align-items:center;justify-content:center;position:relative;
    touch-action:manipulation; user-select:none;
  }
  .frog{
    width:min(280px,78vw);
    height:auto;
    transform-origin:50% 70%;
    filter: drop-shadow(0 16px 24px rgba(0,0,0,.10));
    transition: transform 120ms ease-out;
  }
  .hint{margin-top:8px}
  .row{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:12px}
  button{
    border:1px solid var(--b);border-radius:999px;padding:12px 14px;background:#fff;
    font-weight:700;cursor:pointer;
  }
  .counter{margin-top:10px;color:var(--m)}
  .badge{
    position:absolute;top:12px;right:12px;font-size:12px;color:var(--m);
    border:1px solid var(--b);border-radius:999px;padding:6px 10px;background:#fff;
  }
  .message{
    display:none;
    position:absolute;
    bottom:16px;
    left:50%;
    transform:translateX(-50%);
    width:90%;
    max-width:320px;
    padding:12px 16px;
    border:1px solid var(--b);
    border-radius:18px;
    background:#fff;
    color:var(--t);
    font-weight:500;
    font-size:14px;
    text-align:center;
    z-index:10;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
  }
  .message.show{
    display:block;
  }
  .back-link {
    position: absolute;
    top: 1rem;
    left: 1rem;
    color: var(--m);
    text-decoration: none;
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    border: 1px solid var(--b);
    border-radius: 8px;
    transition: all 0.2s ease;
    z-index: 100;
  }
  .back-link:hover {
    color: var(--t);
    border-color: #ccc;
  }
  .top-bar {
    display: none;
  }
  .bottom-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 1rem;
    flex-wrap: wrap;
    gap: 0.75rem;
    padding-top: 1rem;
    border-top: 1px solid var(--b);
  }
  .top-btn {
    border: 1px solid var(--b);
    border-radius: 999px;
    padding: 12px 14px;
    background: #fff;
    font-weight: 700;
    cursor: pointer;
    font-size: 0.85rem;
  }
  .lang-selector {
    position: relative;
  }
  .lang-btn {
    border: 1px solid var(--b);
    border-radius: 999px;
    padding: 12px 14px;
    background: #fff;
    font-weight: 700;
    cursor: pointer;
    font-size: 0.85rem;
  }
  .lang-menu {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 0.5rem;
    background: #fff;
    border: 1px solid var(--b);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,.1);
    display: none;
    flex-direction: column;
    min-width: 150px;
    z-index: 1000;
  }
  .lang-menu.show {
    display: flex;
  }
  .lang-option {
    padding: 0.75rem 1rem;
    cursor: pointer;
    transition: background 0.2s ease;
    border: none;
    background: none;
    text-align: left;
    font-size: 0.9rem;
    color: var(--t);
  }
  .lang-option:hover {
    background: #f9f9f9;
  }
  .lang-option.active {
    background: #f0f0f0;
    font-weight: 500;
  }

  /* Content (anti "thin content") */
  details.content {
    margin: 12px auto 0;
    width: min(520px, 92vw);
    text-align: left;
    border: 1px solid var(--b);
    border-radius: 16px;
    background: #fafafa;
    padding: 12px 14px;
  }
  details.content summary {
    cursor: pointer;
    font-weight: 800;
    list-style: none;
  }
  details.content summary::-webkit-details-marker { display: none; }
  details.content summary::after { content:"Ôºã"; float:right; color:var(--m); font-weight:700; }
  details.content[open] summary::after { content:"Ôºç"; }
  details.content p { margin: 10px 0 0; color:#374151; }
  details.content ul { margin: 10px 0 0 18px; color:#374151; }

  /* Mobile fit */
  @media (max-width: 600px){
    .main-wrapper{padding:12px}
    .wrap{min-height:auto}
    .stage{height:min(420px, calc(100svh - 260px))}
  }
</style>
</head>
<body>
<div class="main-wrapper">
  <div class="ad-sidebar ad-left">
    <div class="ad-block" id="adLeft">
      <!-- Ad space - 160x600 -->
    </div>
  </div>

  <div class="wrap">
    <a href="../index.html" class="back-link" data-translate="back">‚Üê Back</a>
    
    <div class="card">
    <h2 style="margin:6px 0 0" data-translate="frogTitle">Squish the frog</h2>
    <div class="muted hint" data-translate="frogHint">Tap/click the frog. Sound works after the first tap.</div>

    <div class="stage" id="stage" aria-label="frog stage">
      <div class="badge" data-translate="boopMode">boop mode</div>
      <img id="frogImg" class="frog" alt="frog" src="./frog_idle.png" draggable="false">
      <div class="message" id="message"></div>
    </div>

    <div class="row">
      <button id="muteBtn">üîä Sound: ON</button>
      <button id="resetBtn" data-translate="reset">‚Ü© Reset</button>
    </div>

    <div class="counter"><span data-translate="frogSquishes">Squishes:</span> <b id="count">0</b></div>
    
    <div class="bottom-bar">
      <button class="top-btn" onclick="openDonate()" data-translate="donate">Support</button>
      <div class="lang-selector">
        <button class="lang-btn" id="langBtn" data-translate="language">Language</button>
        <div class="lang-menu" id="langMenu">
          <button class="lang-option" data-lang="en">English</button>
          <button class="lang-option" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
          <button class="lang-option" data-lang="he">◊¢◊ë◊®◊ô◊™</button>
          <button class="lang-option" data-lang="de">Deutsch</button>
          <button class="lang-option" data-lang="cs">ƒåe≈°tina</button>
        </div>
      </div>
      <button class="top-btn" onclick="shareSite()" data-translate="share">Share</button>
    </div>
  </div>

  <details class="content" aria-label="About this page">
    <summary data-translate="whatIsThis">What is this?</summary>
    <p data-translate="frogAboutP">
      A small, silly micro‚Äëinteraction. Tap/press to squish the frog and get a tiny dopamine reset.
      It‚Äôs intentionally simple and quick ‚Äî no levels, no grind.
    </p>
    <ul data-translate-html="frogAboutTipsHtml">
      <li><b>Sound:</b> mobile browsers enable audio after the first tap.</li>
      <li><b>Reset:</b> clears the counter for this session.</li>
      <li><b>Privacy:</b> see <a href="../privacy.html">Privacy</a>.</li>
    </ul>
  </details>
  </div>

  <div class="ad-sidebar ad-right">
    <div class="ad-block" id="adRight">
      <!-- Ad space - 160x600 -->
    </div>
  </div>
</div>

<script>
  const frogImg = document.getElementById('frogImg');
  const stage = document.getElementById('stage');
  const countEl = document.getElementById('count');
  const muteBtn = document.getElementById('muteBtn');
  const resetBtn = document.getElementById('resetBtn');
  const message = document.getElementById('message');

  const FRAMES = {
    idle: "./frog_idle.png",
    squish: "./frog_squish.png",
    pop: "./frog_pop.png",
  };

  let n = 0;
  let soundOn = true;
  let audioCtx = null;
  let frogSound = null;
  let isPressed = false;

  async function unlockAudio(){
    if(audioCtx) return;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    if(audioCtx.state === "suspended") await audioCtx.resume();
  }

  // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–∞
  function loadFrogSound(){
    if(frogSound) return;
    frogSound = new Audio("./frog1.mp3");
    frogSound.preload = "auto";
    frogSound.volume = 0.7;
  }

  function playFrogSound(){
    if(!frogSound || !soundOn) return;
    frogSound.currentTime = 0;
    frogSound.play().catch(e => console.log("Sound play failed:", e));
  }

  function setFrame(key){
    frogImg.src = FRAMES[key];
  }

  function startSquish(){
    if(isPressed) return;
    isPressed = true;
    loadFrogSound();
    unlockAudio();
    playFrogSound();
    setFrame("squish");
    frogImg.style.transform = "scaleX(1.10) scaleY(0.85) rotate(-1.5deg)";
    n++;
    countEl.textContent = n;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω–∞–∂–∞—Ç–∏–π
    const t = translations[currentLang] || translations['en'];
    if(n === 5){
      message.textContent = t.frogMessage1;
      message.classList.add('show');
    } else if(n === 10){
      message.textContent = t.frogMessage2;
      message.classList.add('show');
    } else if(n === 20){
      message.textContent = t.frogMessage3;
      message.classList.add('show');
    }
  }

  function endSquish(){
    if(!isPressed) return;
    isPressed = false;
    frogImg.style.transition = "transform 160ms ease-out";
    frogImg.style.transform = "scale(1)";
    setFrame("idle");
  }

  // pointer events –¥–ª—è —É–¥–µ—Ä–∂–∞–Ω–∏—è
  stage.addEventListener("pointerdown", async (e) => {
    e.preventDefault();
    await unlockAudio();
    startSquish();
  });

  stage.addEventListener("pointerup", (e) => {
    e.preventDefault();
    endSquish();
  });

  stage.addEventListener("pointerleave", (e) => {
    e.preventDefault();
    endSquish();
  });

  muteBtn.addEventListener("click", async () => {
    await unlockAudio();
    soundOn = !soundOn;
    const t = translations[currentLang] || translations['en'];
    muteBtn.textContent = soundOn ? t.soundOn : t.soundOff;
  });

  // Language selector
  const langBtn = document.getElementById('langBtn');
  const langMenu = document.getElementById('langMenu');
  const langOptions = langMenu.querySelectorAll('.lang-option');

  langBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    langMenu.classList.toggle('show');
  });

  document.addEventListener('click', (e) => {
    if (!langMenu.contains(e.target) && e.target !== langBtn) {
      langMenu.classList.remove('show');
    }
  });

  langOptions.forEach(option => {
    option.addEventListener('click', () => {
      const lang = option.getAttribute('data-lang');
      setLanguage(lang);
      langMenu.classList.remove('show');
      
      langOptions.forEach(opt => opt.classList.remove('active'));
      option.classList.add('active');
      
      // Update dynamic texts
      const t = translations[currentLang] || translations['en'];
      muteBtn.textContent = soundOn ? t.soundOn : t.soundOff;
    });
  });

  // Set active language on load
  window.addEventListener('DOMContentLoaded', () => {
    const currentLang = localStorage.getItem('language') || 'en';
    langOptions.forEach(opt => {
      if (opt.getAttribute('data-lang') === currentLang) {
        opt.classList.add('active');
      }
    });
    const t = translations[currentLang] || translations['en'];
    muteBtn.textContent = soundOn ? t.soundOn : t.soundOff;
  });

  resetBtn.addEventListener("click", () => {
    n = 0;
    countEl.textContent = "0";
    setFrame("idle");
    frogImg.style.transform = "scale(1)";
    isPressed = false;
    message.classList.remove('show');
  });

  // preload frames
  Object.values(FRAMES).forEach(src => { const i = new Image(); i.src = src; });
</script>
</body>
</html>
